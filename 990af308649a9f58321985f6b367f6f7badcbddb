{
  "comments": [
    {
      "key": {
        "uuid": "ae564743_89ee85e9",
        "filename": "includes/auth/GooglePrimaryAuthenticationProvider.php",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 221
      },
      "writtenOn": "2016-05-18T21:43:38Z",
      "side": 1,
      "message": "Other methods you need to implement:\n\n* Since GoogleLogin doesn\u0027t use usernames, you should implement providerNormalizeUsername() to return null.",
      "revId": "990af308649a9f58321985f6b367f6f7badcbddb",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ae564743_51cd2f33",
        "filename": "includes/auth/GooglePrimaryAuthenticationProvider.php",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 890
      },
      "writtenOn": "2016-05-19T17:03:35Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ae564743_89ee85e9",
      "revId": "990af308649a9f58321985f6b367f6f7badcbddb",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ae564743_09a395fe",
        "filename": "includes/auth/GooglePrimaryAuthenticationProvider.php",
        "patchSetId": 6
      },
      "lineNbr": 37,
      "author": {
        "id": 221
      },
      "writtenOn": "2016-05-18T21:43:38Z",
      "side": 1,
      "message": "I\u0027d return AuthenticationResponse::newFail() with an appropriate error message rather than throwing an exception.",
      "revId": "990af308649a9f58321985f6b367f6f7badcbddb",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ae564743_51e40fa3",
        "filename": "includes/auth/GooglePrimaryAuthenticationProvider.php",
        "patchSetId": 6
      },
      "lineNbr": 37,
      "author": {
        "id": 890
      },
      "writtenOn": "2016-05-19T17:03:35Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ae564743_09a395fe",
      "revId": "990af308649a9f58321985f6b367f6f7badcbddb",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ae564743_89b6853a",
        "filename": "includes/auth/GooglePrimaryAuthenticationProvider.php",
        "patchSetId": 6
      },
      "lineNbr": 48,
      "author": {
        "id": 221
      },
      "writtenOn": "2016-05-18T21:43:38Z",
      "side": 1,
      "message": "Yes it is. Although I might explicitly pass null to make it clearer that\u0027s what you\u0027re doing.",
      "revId": "990af308649a9f58321985f6b367f6f7badcbddb",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ae564743_31e7dba8",
        "filename": "includes/auth/GooglePrimaryAuthenticationProvider.php",
        "patchSetId": 6
      },
      "lineNbr": 48,
      "author": {
        "id": 890
      },
      "writtenOn": "2016-05-19T17:03:35Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ae564743_89b6853a",
      "revId": "990af308649a9f58321985f6b367f6f7badcbddb",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ae564743_2983f957",
        "filename": "includes/auth/GooglePrimaryAuthenticationProvider.php",
        "patchSetId": 6
      },
      "lineNbr": 52,
      "author": {
        "id": 221
      },
      "writtenOn": "2016-05-18T21:43:38Z",
      "side": 1,
      "message": "Two issues here.\n\n* You should probably be passing \u0027$1\u0027 as the first parameter to RawMessage\u0027s constructor, to avoid confusion in case the exception message contains replacements.\n* IMO you\u0027d do better to have an i18n message to give context to the exception message. Maybe \"Error during Google account verification: $1\". Or maybe even just \"$1\", so someone else can give context to it.",
      "revId": "990af308649a9f58321985f6b367f6f7badcbddb",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ae564743_71fcb33b",
        "filename": "includes/auth/GooglePrimaryAuthenticationProvider.php",
        "patchSetId": 6
      },
      "lineNbr": 52,
      "author": {
        "id": 890
      },
      "writtenOn": "2016-05-19T17:03:35Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ae564743_2983f957",
      "revId": "990af308649a9f58321985f6b367f6f7badcbddb",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ae564743_e9abc183",
        "filename": "includes/auth/GooglePrimaryAuthenticationProvider.php",
        "patchSetId": 6
      },
      "lineNbr": 63,
      "author": {
        "id": 221
      },
      "writtenOn": "2016-05-18T21:43:38Z",
      "side": 1,
      "message": "You need something here that returns sane values for describeCredentials(). ButtonAuthenticationRequest doesn\u0027t do that.",
      "revId": "990af308649a9f58321985f6b367f6f7badcbddb",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ae564743_1139f7ef",
        "filename": "includes/auth/GooglePrimaryAuthenticationProvider.php",
        "patchSetId": 6
      },
      "lineNbr": 63,
      "author": {
        "id": 890
      },
      "writtenOn": "2016-05-19T17:03:35Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ae564743_e9abc183",
      "revId": "990af308649a9f58321985f6b367f6f7badcbddb",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ae564743_09a9d58d",
        "filename": "includes/auth/GooglePrimaryAuthenticationProvider.php",
        "patchSetId": 6
      },
      "lineNbr": 67,
      "author": {
        "id": 221
      },
      "writtenOn": "2016-05-18T21:43:38Z",
      "side": 1,
      "message": "You need something here that returns sane values for describeCredentials(). ButtonAuthenticationRequest doesn\u0027t do that.",
      "revId": "990af308649a9f58321985f6b367f6f7badcbddb",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ae564743_f13ba3e5",
        "filename": "includes/auth/GooglePrimaryAuthenticationProvider.php",
        "patchSetId": 6
      },
      "lineNbr": 67,
      "author": {
        "id": 890
      },
      "writtenOn": "2016-05-19T17:03:35Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ae564743_09a9d58d",
      "revId": "990af308649a9f58321985f6b367f6f7badcbddb",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ae564743_69dfb16c",
        "filename": "includes/auth/GooglePrimaryAuthenticationProvider.php",
        "patchSetId": 6
      },
      "lineNbr": 70,
      "author": {
        "id": 221
      },
      "writtenOn": "2016-05-18T21:43:38Z",
      "side": 1,
      "message": "If you want to support creating an account rather than just linking to an existing one, I believe you\u0027ll need to return something for AuthManager::ACTION_CREATE.",
      "revId": "990af308649a9f58321985f6b367f6f7badcbddb",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ae564743_ec674ab2",
        "filename": "includes/auth/GooglePrimaryAuthenticationProvider.php",
        "patchSetId": 6
      },
      "lineNbr": 70,
      "author": {
        "id": 890
      },
      "writtenOn": "2016-05-19T17:03:35Z",
      "side": 1,
      "message": "Should I respond to this action, even if GoogleLogin itself shouldn\u0027t create accounts (it would create local wiki accounts and would re-implement/re-use the creation of new users from MediaWiki? :)",
      "parentUuid": "ae564743_69dfb16c",
      "revId": "990af308649a9f58321985f6b367f6f7badcbddb",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ae564743_acd55215",
        "filename": "includes/auth/GooglePrimaryAuthenticationProvider.php",
        "patchSetId": 6
      },
      "lineNbr": 70,
      "author": {
        "id": 221
      },
      "writtenOn": "2016-05-19T17:15:22Z",
      "side": 1,
      "message": "\"Creating accounts\" here means creating a local wiki account. For something like CentralAuth that includes adding the same user to CentralAuth\u0027s database, but for GoogleLogin it just means that we immediately link the just-created local account to an existing Google account.\n\nIf the user needs to create a Google account too, hopefully Google include a create account link on their \"authenticate\" page that we redirect to. We probably shouldn\u0027t worry about that.",
      "parentUuid": "ae564743_ec674ab2",
      "revId": "990af308649a9f58321985f6b367f6f7badcbddb",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ae564743_47ac51eb",
        "filename": "includes/auth/GooglePrimaryAuthenticationProvider.php",
        "patchSetId": 6
      },
      "lineNbr": 70,
      "author": {
        "id": 389
      },
      "writtenOn": "2016-05-19T18:09:55Z",
      "side": 1,
      "message": "AuthManager will support (but it\u0027s currently buggy) link-then-signup: go to login, log in with Google account, get a message saying this was a valid login but no local account exists, do signup (handled by LocalPasswordPAP, so this provider wouldn\u0027t have to deal with signups), account gets autolinked. That has two issues though:\n- what if there is no other provider? Something has to be able to handle signups.\n- how will the user discover this path? Most pages have a \"sign up with Google\" button on their registration page, the user might not think of going to the login page to look for it.",
      "parentUuid": "ae564743_acd55215",
      "revId": "990af308649a9f58321985f6b367f6f7badcbddb",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ae564743_691a111d",
        "filename": "includes/auth/GooglePrimaryAuthenticationProvider.php",
        "patchSetId": 6
      },
      "lineNbr": 75,
      "author": {
        "id": 221
      },
      "writtenOn": "2016-05-18T21:43:38Z",
      "side": 1,
      "message": "This is probably correct for testUserExists(), although I\u0027m not sure that what you had in PS4 was necessarily wrong either.\n\nIf you keep this implementation, then you\u0027ll need to implement testUserCanAuthenticate() instead like you had this in PS4.",
      "revId": "990af308649a9f58321985f6b367f6f7badcbddb",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ae564743_d132df04",
        "filename": "includes/auth/GooglePrimaryAuthenticationProvider.php",
        "patchSetId": 6
      },
      "lineNbr": 75,
      "author": {
        "id": 890
      },
      "writtenOn": "2016-05-19T17:03:35Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ae564743_691a111d",
      "revId": "990af308649a9f58321985f6b367f6f7badcbddb",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ae564743_a99d496b",
        "filename": "includes/auth/GooglePrimaryAuthenticationProvider.php",
        "patchSetId": 6
      },
      "lineNbr": 81,
      "author": {
        "id": 221
      },
      "writtenOn": "2016-05-18T21:43:38Z",
      "side": 1,
      "message": "This is wrong. You\u0027ll need to not ignore whichever AuthenticationRequest you return from getAuthenticationRequests() for the ACTION_REMOVE.",
      "revId": "990af308649a9f58321985f6b367f6f7badcbddb",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ae564743_2c2662b6",
        "filename": "includes/auth/GooglePrimaryAuthenticationProvider.php",
        "patchSetId": 6
      },
      "lineNbr": 81,
      "author": {
        "id": 890
      },
      "writtenOn": "2016-05-19T17:03:35Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ae564743_a99d496b",
      "revId": "990af308649a9f58321985f6b367f6f7badcbddb",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ae564743_0990b54d",
        "filename": "includes/auth/GooglePrimaryAuthenticationProvider.php",
        "patchSetId": 6
      },
      "lineNbr": 85,
      "author": {
        "id": 221
      },
      "writtenOn": "2016-05-18T21:43:38Z",
      "side": 1,
      "message": "Yes. You\u0027d react to the AuthenticationRequest you returned from getAuthenticationRequests() for the ACTION_REMOVE.",
      "revId": "990af308649a9f58321985f6b367f6f7badcbddb",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ae564743_6c805a4b",
        "filename": "includes/auth/GooglePrimaryAuthenticationProvider.php",
        "patchSetId": 6
      },
      "lineNbr": 85,
      "author": {
        "id": 890
      },
      "writtenOn": "2016-05-19T17:03:35Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ae564743_0990b54d",
      "revId": "990af308649a9f58321985f6b367f6f7badcbddb",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ae564743_29893927",
        "filename": "includes/auth/GooglePrimaryAuthenticationProvider.php",
        "patchSetId": 6
      },
      "lineNbr": 93,
      "author": {
        "id": 221
      },
      "writtenOn": "2016-05-18T21:43:38Z",
      "side": 1,
      "message": "// TODO: Implement this ;)",
      "revId": "990af308649a9f58321985f6b367f6f7badcbddb",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ae564743_697e9115",
        "filename": "includes/auth/GooglePrimaryAuthenticationProvider.php",
        "patchSetId": 6
      },
      "lineNbr": 103,
      "author": {
        "id": 221
      },
      "writtenOn": "2016-05-18T21:43:38Z",
      "side": 1,
      "message": "(see line 37)",
      "revId": "990af308649a9f58321985f6b367f6f7badcbddb",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ae564743_ac9d52b6",
        "filename": "includes/auth/GooglePrimaryAuthenticationProvider.php",
        "patchSetId": 6
      },
      "lineNbr": 103,
      "author": {
        "id": 890
      },
      "writtenOn": "2016-05-19T17:03:35Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ae564743_697e9115",
      "revId": "990af308649a9f58321985f6b367f6f7badcbddb",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ae564743_098f1528",
        "filename": "includes/auth/GooglePrimaryAuthenticationProvider.php",
        "patchSetId": 6
      },
      "lineNbr": 123,
      "author": {
        "id": 221
      },
      "writtenOn": "2016-05-18T21:43:38Z",
      "side": 1,
      "message": "(see line 52)",
      "revId": "990af308649a9f58321985f6b367f6f7badcbddb",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ae564743_ec93caa3",
        "filename": "includes/auth/GooglePrimaryAuthenticationProvider.php",
        "patchSetId": 6
      },
      "lineNbr": 123,
      "author": {
        "id": 890
      },
      "writtenOn": "2016-05-19T17:03:35Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ae564743_098f1528",
      "revId": "990af308649a9f58321985f6b367f6f7badcbddb",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ae564743_89c96560",
        "filename": "includes/auth/GooglePrimaryAuthenticationProvider.php",
        "patchSetId": 6
      },
      "lineNbr": 154,
      "author": {
        "id": 221
      },
      "writtenOn": "2016-05-18T21:43:38Z",
      "side": 1,
      "message": "This value should be part of the key you use on line 141. It looks like you can retrieve it there with $client-\u003egetConfig( \u0027state\u0027 ).",
      "revId": "990af308649a9f58321985f6b367f6f7badcbddb",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ae564743_eceaaa03",
        "filename": "includes/auth/GooglePrimaryAuthenticationProvider.php",
        "patchSetId": 6
      },
      "lineNbr": 154,
      "author": {
        "id": 890
      },
      "writtenOn": "2016-05-19T17:03:35Z",
      "side": 1,
      "message": "I\u0027m not sure, what you mean, sorry :/ Why should the token be part of the RETURNURL_SESSION_KEY?",
      "parentUuid": "ae564743_89c96560",
      "revId": "990af308649a9f58321985f6b367f6f7badcbddb",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ae564743_6c95fa34",
        "filename": "includes/auth/GooglePrimaryAuthenticationProvider.php",
        "patchSetId": 6
      },
      "lineNbr": 154,
      "author": {
        "id": 221
      },
      "writtenOn": "2016-05-19T17:15:22Z",
      "side": 1,
      "message": "One more bit of security, mostly. That way it can\u0027t be spoofed somehow by a return-from-Google with a different token.",
      "parentUuid": "ae564743_eceaaa03",
      "revId": "990af308649a9f58321985f6b367f6f7badcbddb",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ae564743_cc47e6bd",
        "filename": "includes/auth/GooglePrimaryAuthenticationProvider.php",
        "patchSetId": 6
      },
      "lineNbr": 154,
      "author": {
        "id": 890
      },
      "writtenOn": "2016-05-19T18:08:46Z",
      "side": 1,
      "message": "Ah, ok, the token is already checked in Special:GoogleLoginReturn and the user gets redirected to this special page only, if the token returned by Google matches :)",
      "parentUuid": "ae564743_6c95fa34",
      "revId": "990af308649a9f58321985f6b367f6f7badcbddb",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ae564743_496aadb1",
        "filename": "includes/auth/GoogleServerAuthenticationRequest.php",
        "patchSetId": 6
      },
      "lineNbr": 30,
      "author": {
        "id": 221
      },
      "writtenOn": "2016-05-18T21:43:38Z",
      "side": 1,
      "message": "You\u0027ll need to add \u0027label\u0027 and \u0027help\u0027 keys here. The values of both are Message objects, generally just something like\n\n \u0027label\u0027 \u003d\u003e wfMessage( \u0027some-message-name\u0027 ),\n \u0027help\u0027 \u003d\u003e wfMessage( \u0027some-message-name\u0027 ),\n\nThe \"label\" field is the label used for the form field on Special:UserLogin. The \"help\" field is an explanation of what the value is, like what you\u0027d see in API documentation.",
      "revId": "990af308649a9f58321985f6b367f6f7badcbddb",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ae564743_4caf5678",
        "filename": "includes/auth/GoogleServerAuthenticationRequest.php",
        "patchSetId": 6
      },
      "lineNbr": 30,
      "author": {
        "id": 890
      },
      "writtenOn": "2016-05-19T17:17:05Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ae564743_496aadb1",
      "revId": "990af308649a9f58321985f6b367f6f7badcbddb",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ae564743_e9f0e163",
        "filename": "includes/auth/GoogleServerAuthenticationRequest.php",
        "patchSetId": 6
      },
      "lineNbr": 30,
      "author": {
        "id": 389
      },
      "writtenOn": "2016-05-19T18:09:55Z",
      "side": 1,
      "message": "Also, these probably need to be optional, unless Google always returns non-empty values for both options.",
      "parentUuid": "ae564743_496aadb1",
      "revId": "990af308649a9f58321985f6b367f6f7badcbddb",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ae564743_296db9c7",
        "filename": "includes/auth/GoogleServerAuthenticationRequest.php",
        "patchSetId": 6
      },
      "lineNbr": 33,
      "author": {
        "id": 221
      },
      "writtenOn": "2016-05-18T21:43:38Z",
      "side": 1,
      "message": "(here too)",
      "revId": "990af308649a9f58321985f6b367f6f7badcbddb",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ae564743_acc9d25f",
        "filename": "includes/auth/GoogleServerAuthenticationRequest.php",
        "patchSetId": 6
      },
      "lineNbr": 33,
      "author": {
        "id": 890
      },
      "writtenOn": "2016-05-19T17:17:05Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ae564743_296db9c7",
      "revId": "990af308649a9f58321985f6b367f6f7badcbddb",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    }
  ]
}